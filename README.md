



---



<center><h1>Hacking the Paris Metro</h1></center>

<h6><center>Data analysis of real-time RATP data</center></h6>



---


![jupyter notebook x python](https://img.shields.io/badge/jupyter%20notebook-python-orange)![DeepLearning x DNN](https://img.shields.io/badge/DeepLearning-DNN-blue)![ML x Regressions](https://img.shields.io/badge/MachineLearning-Regressions-ff69b4)


In early 2017, the RATP (Régie Autonome des Transports Parisiens, the state-owned public transport operator in Paris) made available to the public (through a web service) its real-time data of the public transportation system in the Paris metropolitan area. Our goal is to use **data science tools** in order to make sense of the vast amounts of raw data that are being produced and to **predict the lateness of trains (RER B)**.

The work consists of three parts:

* Preprocessing the Acquired data 

  &rarr; Retrieve data from log files (.csv and .txt)

  &rarr; Reorganize the data

  &rarr; Remove noises from the data

  * See `Data-processing-Tweets-et-perturbation.ipynb` and `preprocessing-et-processing.ipynb` for more information

* Analyzing the Data

  &rarr; Correlation analysis between different data types

  &rarr; Tweets frequency analysis of the RATP Twitter account

  * See `Data-processing-Tweets-et-perturbation.ipynb` for more information

* Using Machine Learning

  &rarr; **Regression Models**, different linear regression models were used 

  &rarr; **Neural Network**, a Deep Neural Network with sigmoid activation functions was used
  
  * See respectively `Modèles-de-Régression.ipynb` and `deep-learning.ipynb` for more information

Finally, we compared our predictions to RATP's own live predictions of the **RER B's** arrival time. *Spoilers,* we achieved better results.

## Prerequisites

* Miniconda or Anaconda

## Conda Environment Setup

You can use one of the following to setup the conda environment:

- the dependency `.yml` file
- the step by step procedure below

### Dependency File Setup

`conda env create` has many options, but we will restrict ourselves to two of them:

- `-n|--name` with this option you can overwrite the default environment names which is `ParisMetro`
- `-f|--file` this option lets you specify the name of the dependency file you would like to use

To create the conda environment `ParisMetro`, with **gpu** support, run:

```bash
conda env create -f ParisMetro.yml
```

To create the conda environment `ParisMetro`, with **cpu** support, run:

```bash
conda env create -f ParisMetro_CPU.yml
```

Activate the created conda environment

```bash
conda activate ParisMetro
```

> ⚠ **Remark**: The `.yml` were generated by saving the original environment used to compile `Hacking the Paris Metro` , thus it is safer to use. ⚠

### Step by Step Guide

If you do not use the setup script, you can create the environment with the following steps:

- Create the environment

```bash
conda create -n ParisMetro python=3.7.6 numpy
```

- Activate the created conda environment

```bash
conda activate ParisMetro
```

- Within conda environment, Install the libraries

```bash
conda install -y jupyter pandas matplotlib seaborn nbformat scikit-learn
conda install -y jupyterlab tqdm -c conda-forge
```

- Within conda environment, pip Install those libraries too

  ```bash
  pip install nbresuse torchsummary
  ```

Those packages are compatible with pytorch 1.1.0

- Install pytorch(within conda environment)

  - with gpu support:

  ```bash
  conda install pytorch torchvision cudatoolkit=10.2 -c pytorch
  ```

  - or **without** gpu support:

  ```bash
  conda install pytorch torchvision cpuonly -c pytorch
  ```

## Launching Notebooks

In your local copy of `Hacking the Paris Metro`, at the same level as `.git`, you can execute the following line after **installing** and **activating** your conda environment if you wish to view the notebooks:

```bash 
jupyter lab
```

Double click on the `.ipynb` you desire to view and enjoy the reading experience!

:warning: **Remark:**  Comments are written in french, but this doesn't mean non french speakers can't understand the results.:warning:

## License

Copyrights 2020 team JCL CALOT.

## Authors

[Jean-Charles LAYOUN](https://www.linkedin.com/in/jclayoun). You can get in touch with me at [jean-charles.layoun@polytechnique.edu](mailto:jean-charles.layoun@polytechnique.edu).

[Paul CALOT](https://www.linkedin.com/in/paul-calot-43549814b/). You can get in touch with him at [paul.calot-plaetevoet@polytechnique.edu](mailto:paul.calot-plaetevoet@polytechnique.edu).

